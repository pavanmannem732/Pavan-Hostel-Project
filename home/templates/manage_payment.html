{% extends "base.html" %}
{% block content %}
<div class="container" style="max-width: 900px; margin: 30px auto;">

    <!-- Page Header -->
    <h2 style="text-align:center; color:#2c3e50; margin-bottom: 20px;">
        💰 Manage Payments
    </h2>

    <!-- Payment Form -->
    <div style="background:#fff; border-radius:10px; padding:25px; box-shadow:0 4px 10px rgba(0,0,0,0.1); margin-bottom:30px;">
        <h4 style="margin-bottom: 15px; color:#34495e;">Add / Edit Payment</h4>
        
        <form method="post">
            {% csrf_token %}
            <div style="margin-bottom:15px;">
                <label style="font-weight:600;">Amount</label>
                <input type="number" name="amount" step="0.01" value="{{ payment.amount|default:'' }}" 
                       class="form-control" 
                       style="width:100%; padding:10px; border:1px solid #ccc; border-radius:5px;" required>
            </div>

            <div style="margin-bottom:15px;">
                <label style="font-weight:600;">Month</label>
                <input type="text" name="month" value="{{ payment.month|default:'' }}" 
                       class="form-control" 
                       style="width:100%; padding:10px; border:1px solid #ccc; border-radius:5px;" required>
            </div>

            <button type="submit" 
                    style="background:#27ae60; color:white; border:none; padding:12px 20px; 
                           border-radius:6px; font-size:16px; cursor:pointer; transition:0.3s;">
                💾 Save Payment
            </button>
        </form>
    </div>

    <!-- Existing Payments Table -->
    <div style="background:#fff; border-radius:10px; padding:25px; box-shadow:0 4px 10px rgba(0,0,0,0.1);">
        <h4 style="margin-bottom: 15px; color:#34495e;">📑 Existing Payments</h4>

        <table style="width:100%; border-collapse:collapse; text-align:center;">
            <thead>
                <tr style="background:#2980b9; color:white;">
                    <th style="padding:12px;">Student</th>
                    <th>Amount</th>
                    <th>Month</th>
                    <th>Date Paid</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for pay in student.payments.all %}
                <tr style="border-bottom:1px solid #ddd; transition:0.3s;">
                    <td style="padding:10px;">{{ student.fullname }}</td>
                    <td>₹{{ pay.amount }}</td>
                    <td>{{ pay.month }}</td>
                    <td>{{ pay.date_paid|date:"M d, Y" }}</td>
                    <td>
                        <a href="?payment_id={{ pay.id }}" 
                           style="color:#2980b9; font-weight:600; margin-right:10px;">✏️ Edit</a>
                        <a href="{% url 'delete_payment' pay.id %}" 
                           style="color:#e74c3c; font-weight:600;" 
                           onclick="return confirm('Are you sure you want to delete this payment?');">🗑 Delete</a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5" style="padding:15px; color:#7f8c8d;">No payments yet.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Back Button -->
    <div style="margin-top:20px; text-align:center;">
        <a href="{% url 'admin_student_list' %}" 
          style="color:#2980b9; font-weight:600; text-decoration:none;">⬅ Back</a>

          


    </div>
</div>
{% endblock %}
